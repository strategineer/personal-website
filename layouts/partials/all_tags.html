<div>
    {{ $p := .Scratch.Get "tags_section" }}
      <ul>
      {{ range $taxonomyname, $taxonomy := .Site.Taxonomies }}
            <ul>
              {{ range $tag, $value := $taxonomy }}
              {{ $values := (where .Pages "Section" $p)}}
              {{ $n_values := len $values }}
                {{ if gt $n_values 0 }}
                {{  $pretty_tag := index $.Site.Data.tag_mapping $tag | default $tag }}
                <a href="/{{- $taxonomyname -}}/{{- $tag -}}">
                <li> {{ $pretty_tag }} </li>
                </a>
                      <ul>
                      {{ range $values }}
                          <li hugo-nav="{{ .RelPermalink}}"><a href="{{ .Permalink}}"> {{ .LinkTitle }} </a> </li>
                      {{ end }}
                      </ul>
                {{ end }}
              {{ end }}
            </ul>
        {{ end }}
    </ul>
  </div>
