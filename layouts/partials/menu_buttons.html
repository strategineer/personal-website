{{ $tags_suffix := "/tags" }}
{{ $pages := slice -}}
{{ $is_tag_page := strings.HasSuffix .Section $tags_suffix }}
{{ if $is_tag_page }}
  {{ $pages = index (index $.Site.Taxonomies .Section) .Title }}
{{ else }}
  {{ $pages = where $.Site.RegularPages "Section" .Section }}
{{ end }}
{{ $has_random_button := and ($pages) (not .Params.explorer) }}
{{ if $has_random_button }}
  {{ $urls := slice }}
  {{ range $pages }}
  {{ $is_ramble := in (index .Params "blog/tags") "ramble" }}
  {{ if not $is_ramble }}
  {{ $urls = $urls | append .Permalink }}
  {{ end }}
  {{ end }}
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-auto">
        <a onclick="goToRandomUrl({{ $urls }})">
        <button type="button" class="btn btn-light menu-button">
          Surprise me!
        </button>
        </a>
      </div>
    </div>
  </div>
{{- end -}}
