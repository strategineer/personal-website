{{ if not .Params.exclude_from_summary }}
{{ $is_ramble_blog_post := and (eq .Section "blog")  (in (index .Params "blog/tags") "ramble") }}
<article class="post-summary">
  {{ $is_less_important := in (index .Params "blog/tags") "ramble" }}
  {{ $summary_classes := cond $is_less_important "less-important" "" }}
  <div class="row summary-row {{ $summary_classes }}">
  {{ if .Params.use_album_summary }}
    {{ $thumbnail := .Resources.GetMatch "thumbnail.*" }}
    {{ if $thumbnail }}
      <div class="col">
        <a href='{{ .Permalink }}'>
          {{ with $thumbnail.Resize "x400 webp" }}
          <img class="img-fluid rounded mx-auto d-block" src="data:{{ .MediaType }};base64,{{ .Content | base64Encode }}">
          {{ end }}
        </a>
      </div>
    {{ end }}
  {{ end }}
    <div class="col">
      <h2>
        <a href='{{ .Permalink }}'>
          {{ .Render "title_text" }}
        </a>
      </h2>
      {{ if .Params.use_album_summary }}
        {{ if .Params.blurb }}
          {{ .Params.blurb }}
        {{ else }}
        ...
        {{ end }}
      {{ else }}
        <div class="row post-meta">
          <div class="col-auto align-middle">
          {{ .Date.Format "Mon, Jan 2, 2006" }} - {{ .ReadingTime }}min read
          </div>
          {{ if not $is_ramble_blog_post }}
          <div class="col float-right">
            {{ partial "try_tags" . }}
          </div>
          {{ end }}
        </div>
        {{ if not $is_ramble_blog_post }}
        {{ .Summary }}
        {{ end }}
      {{ end }}
  </div>
  {{ if not $is_ramble_blog_post }}
    {{ if and (not .Params.use_album_summary) .Truncated }}
    <div class="row read-more">
      <div class="col">
        <a class="float-right" href='{{ .Permalink }}'><nobr>Read more â†’</nobr></a>
      </div>
    </div>
    {{ end }}
  {{ end }}
</article>
{{ end }}
