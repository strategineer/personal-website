{{- $inner := .Inner -}}
{{- if strings.ContainsNonSpace $inner -}}
  {{ $clean_rows := slice }}
  {{ $rows := split $inner "\n" }}
  {{ $header := "Table" }}
  {{ $i := 0 }}
  {{ range $r := $rows }}
    {{ if not (strings.HasPrefix $r "|") }}
      {{ continue }}
    {{ end }}
    {{ if eq $i 0 }}
      {{ $header = $r }}
    {{ end }}
    {{ $i = add $i 1 }}
    {{ if lt $i 3 }}
      {{ continue }}
    {{ end }}
    {{ if gt $i 13 }}
    {{ continue }}
    {{ end }}
    {{ $clean_rows = $clean_rows | append $r }}
  {{ end }}

  {{ $table_name := printf "%s" (.Get 0) }}

  <script type="text/javascript">
    const rows{{- $table_name | safeJS }} = [
      {{- range $r := $clean_rows -}}
      {"label": "{{- $r -}}"},
      {{ end }}
      ];
    function randomize{{- $table_name | safeJS -}}() {
      document.getElementById("table_result_{{$table_name}}").innerHTML = randomizeTable("{{ .Get 0 }}", "{{ $header }}", rows{{- $table_name | safeJS -}})
  }
  </script>
  <div>
    <button onclick="randomize{{- $table_name | safeJS -}}()">Pick random {{ $table_name -}}!</button>
    <div id="table_result_{{$table_name}}"></div>
  </div>
    {{ $inner | markdownify }}
{{- end -}}
